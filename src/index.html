<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>webpack-minimal</title>
    <style>
     .sg-wrap {
         position: relative;
         margin: auto;
         width: 90%;
         height: 0;
         padding-bottom: 90%;
     }
     .controls {
         margin: auto;
     }
    </style>
    <link rel="stylesheet" href="./assets/piece-css/pixel.css"/>
</head>
<body>
<section>
  <div id="app" class="is2d"></div>

  <div class="controls">
    <button id="nextLevel"> Next Level </button>
    <button id="prevLevel"> Previous Level </button>
  </div>

  <div class="hud">
    <p> Level <span id="level">?</span></p>
    <p> Fen <span id="fen">?</span></p>
  </div>

</section>

<script>

 var sokoban;
 var level = 1;

 var opts = {
   events: {
     move() {
       renderFen(sokoban.getFen());
     }
   }
 };

 Sokoban(document.getElementById('app'), opts, soko => {
   sokoban = soko;
   renderHud(level, sokoban);
   onClick(document.getElementById('nextLevel'), () => {
     level++;
     renderHud(level, sokoban);
     sokoban.set({
       level: level
     });
   });

   onClick(document.getElementById('prevLevel'), () => {
     level--;
     renderHud(level, sokoban);
     sokoban.set({
       level: level
     });
   });
 });

 function renderHud(level, sokoban) {
   renderLevel(level);
   renderFen(sokoban.getFen());
 }

 function renderFen(fen) {
   document.getElementById('fen').innerHTML = fen;
 }

 function renderLevel(level) {
   document.getElementById('level').innerHTML = level;
 } 

 function onClick(el, f) {
   el.addEventListener('click', f);
 }
 
</script>

</body>
</html>
